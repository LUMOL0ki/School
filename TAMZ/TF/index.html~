<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="css.css">
<title>Doomsday</title>
</head>
<body>
	<div class="main">
		<h1>End is near!!!</h1>
		<p>Current time:</p>
		<div id="time"> </div>
		<p>End of the world at:</p>
		<div id="doom"><input id="doomDate" type="date"><input id="doomTime" type="time"><button id="parseButton">Start</button> </div>
		
		<p>Time left:</p>
		<div id="toLive"> </div>
		<script>
		var inter = setInterval(updateClock, 1000);
		var c = 0;
		var x, y, z = 0;
		function updateClock() {
			var date = new Date();
				month = date.getMonth() + 1;
				today = date.getDate()+ "." + month + "." + date.getFullYear();			
				if (date.getSeconds() < 10) {
					second = '0' + date.getSeconds();	
				}else{
					second = date.getSeconds();
				}
				if (date.getMinutes() < 10) {
					minute = '0' + date.getMinutes()	
				}else{
					minute = date.getMinutes()
				}							
				time = date.getHours() + ":" + minute + ":" + second;
				document.getElementById('time').innerHTML = today + " " + time;
								
				
				if(z == 1){			
				d = new Date();
				d.setDate(x.getDate())						
				d.setMonth(x.getMonth()+1)				
				d.setFullYear(x.getFullYear())
				d.setHours(y.getHours()-1)
				d.setMinutes(y.getMinutes())
		
				doomDay = d.getDate();
				doomMonth = d.getMonth();
				doomYear = d.getFullYear();
				doomHour = d.getHours();
				doomMinute = d.getMinutes();
				
				doom = doomDay + "." + doomMonth + "." + doomYear + " " + doomHour + ":" + doomMinute;				
				document.getElementById('doom').innerHTML = doom;
				
				toLiveDay = doomDay - date.getDate();
				if(date.getMinutes() < doomMinute){				
					toLiveHour = (toLiveDay * 24 ) - date.getHours() + doomHour;
				}else{
					toLiveHour = (toLiveDay * 24 ) - date.getHours() - 1 + doomHour;
				}
				if(date.getSeconds() >= 0){
					if(date.getMinutes() > doomMinute){
						toLiveMinute = doomMinute - date.getMinutes()-1 + 60;					
					}else{
						toLiveMinute = doomMinute - date.getMinutes()-1;
					}
				}else {
					if(date.getMinutes() > doomMinute){
						toLiveMinute = doomMinute - date.getMinutes() + 60;					
					}else{
						toLiveMinute = doomMinute - date.getMinutes();
					}
				}
				
				toLiveSecond = 59 - date.getSeconds();
				
				if(toLiveMinute < 10){
					toLiveMinute = "0" + toLiveMinute;
				}
				if(toLiveSecond < 10){
					toLiveSecond = "0" + toLiveSecond;				
				}
				document.getElementById('toLive').innerHTML = toLiveHour + ":" + toLiveMinute + ":" + toLiveSecond;
				//document.getElementById('toLive').innerHTML = c++;
				if (toLiveHour<=0 && toLiveMinute<=0 && toLiveSecond<=0) {
					clearInterval(inter);
					document.getElementById('toLive').innerHTML = "BOOM!!!";
					document.getElementById('doom').innerHTML = "BOOM!!!";
					document.getElementById('time').innerHTML = "BOOM!!!";
				}	
				}
				document.getElementById('parseButton').onclick = function() {
					x = document.getElementById('doomDate').valueAsDate;
					y = document.getElementById('doomTime').valueAsDate;
					z = 1;
				}			
		}
		</script>
		
	</div>	
	
</body>
</html>